* C:\proj\bog_on_a_plate\spice\preamp.asc
XU1 N013 N005 N001 N018 N005 NE5532
C1 N005 N012 47n
R1 N013 N012 {r_cutoff}
R2 N012 N004 {r_cutoff}
C2 N013 0 100n
V1 N002 0 40
V2 0 N019 40
V3 IN 0 SINE(0 0.5 50) AC 1
XU2 N015 N003 N001 N018 N004 NE5532
R4 N004 N003 10k
R5 N003 0 3k
R6 N015 N014 {r_vol_hi}
R8 N015 0 {r_vol_lo}
C3 N014 IN 22µ
R9 IN 0 22k
C5 N004 N003 220p
D1 0 N009 BZX84C12L
D2 N017 0 BZX84C12L
R7 N002 N009 47k
R10 N017 N019 47k
Q2 N002 N009 N001 0 BC547B
Q3 N019 N017 N018 0 BC557C
C4 N018 0 100n
C6 0 N001 100n
C7 N009 0 1µ
C8 0 N017 1µ
XU3 N011 N006 N001 N018 N007 NE5532
R3 N011 N005 10k
R11 N006 N005 10k
R12 N007 N006 10k
R13 N005 0 22k
R14 N011 0 {r_inv}
XU4 N010 N008 N001 N018 OUT NE5532
C9 N010 N007 100n
R15 N008 N007 10k
R16 OUT N008 10k
R17 N010 N016 {r_ph_hi}
R18 N016 0 {r_ph_lo}
R19 N016 0 10k
.model D D
.lib C:\Users\pontu\AppData\Local\LTspice\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib C:\Users\pontu\AppData\Local\LTspice\lib\cmp\standard.bjt
* .tran 0 2 20m 10u
.ac dec 1000 1 10k
* R6 and R8 set gain
* R1 and R2 sets cutoff
.param vol=0.231 r_vol=100k r_vol_hi=1m+(1-{vol})*{r_vol} r_vol_lo=1m+vol*{r_vol} r_cutoff=22k inv=1 ph=0
.param r_inv=if(inv,1m,1G)
.param r_ph=47k
.param r_ph_lo=1m+r_ph*(1-ph) r_ph_hi=1m+r_ph*ph
;.step param vol list 1 0.5 0.25 0.125 0.06125
;.step dec param r_cutoff 1k 50k 2
;.step param inv list 0 1
.step param ph list 0 0.2 0.4. 0.6 0.8 1
* Phase shift
* Voltage dropper
.lib ne5532.sub
.backanno
.end
